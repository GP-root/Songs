"use strict";(self["webpackChunksongs"]=self["webpackChunksongs"]||[]).push([[477],{3200:function(l,e,n){n.r(e),n.d(e,{default:function(){return Z}});var u=n(6269),a=(n(3450),n(5658),n(8970)),i=(n(8868),n(6770)),t=n(7755),o=(n(6886),n(4704)),v=(n(4745),n(2516)),s=(n(8843),n(9894)),d=(n(1262),n(440)),c=n(8643),r=n(4367),m=n(4804),p=n(4059),f=n(5170),g=n(7578),w=n(9252),_=function(l,e,n,u){function a(l){return l instanceof n?l:new n((function(e){e(l)}))}return new(n||(n=Promise))((function(n,i){function t(l){try{v(u.next(l))}catch(e){i(e)}}function o(l){try{v(u["throw"](l))}catch(e){i(e)}}function v(l){l.done?n(l.value):a(l.value).then(t,o)}v((u=u.apply(l,e||[])).next())}))};const y={class:"back","infinite-scroll-immediate":!1},h={class:"dataBack"},W={class:"data"},k={class:"title"},z={class:"_ellipsis"},b={class:"user"},I={class:"operate"},H={class:"list"};var S=(0,d.aZ)({__name:"detailed",setup(l){const e=(0,m.tv)(),n=e.currentRoute.value.params.id,S=(0,r.iH)(),V=(0,r.iH)([]);let Y=0;(0,d.bv)((()=>_(this,void 0,void 0,(function*(){S.value=yield p.IY.getDetail(n),V.value=yield p.IY.getPartSongs(n,20),Y+=20}))));const Z=30;function x(){return _(this,void 0,void 0,(function*(){S.value&&Y<S.value.count.song&&(Y+Z<=S.value.count.song?(V.value=V.value.concat(yield p.IY.getPartSongs(n,Z,Y)),Y+=Z):(V.value=V.value.concat(yield p.IY.getPartSongs(n,S.value.count.song-Y,Y)),Y+=S.value.count.song-Y))}))}const C=(0,r.iH)(!1);function D(){C.value=!C.value}const P=(0,r.iH)(!1);function U(){P.value=!P.value}return(l,e)=>{var m,p,_,Y,Z,j,F,K,q;const A=s.F8,B=v.Ks,R=(0,d.up)("Share"),E=o.gn,G=t.mi,J=i.Z,L=(0,d.up)("Check"),M=(0,d.up)("FolderAdd"),N=a.zd,O=u.n;return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.wy)(((0,d.wg)(),(0,d.iD)("div",y,[(0,d._)("div",h,[(0,d.Wm)(A,{class:"cover",src:null===(p=null===(m=S.value)||void 0===m?void 0:m.cover)||void 0===p?void 0:p.url,fit:"cover",loading:"lazy"},null,8,["src"]),(0,d._)("div",W,[(0,d._)("div",k,[(0,d._)("span",z,(0,c.zw)(null===(_=S.value)||void 0===_?void 0:_.name),1),((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(null===(Y=S.value)||void 0===Y?void 0:Y.tags,(l=>((0,d.wg)(),(0,d.j4)(B,{class:"tag",hit:!0,type:"info",size:"small",color:"var(--darker-fill)"},{default:(0,d.w5)((()=>[(0,d.Uk)((0,c.zw)(l),1)])),_:2},1024)))),256))]),(0,d._)("div",b,[(0,d.Wm)(A,{src:null===(j=null===(Z=S.value)||void 0===Z?void 0:Z.user.cover)||void 0===j?void 0:j.url,class:"avatar"},null,8,["src"]),(0,d._)("span",null,(0,c.zw)(null===(F=S.value)||void 0===F?void 0:F.user.name),1)]),(null===(K=S.value)||void 0===K?void 0:K.description)?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"description _ellipsis",onClick:D},[(0,d._)("span",null,(0,c.zw)(S.value.description),1)])):(0,d.kq)("",!0),(0,d._)("div",I,[(0,d.Wm)(G,{text:"",type:"primary",title:"分享"},{default:(0,d.w5)((()=>{var l;return[(0,d.Wm)(E,{size:"20"},{default:(0,d.w5)((()=>[(0,d.Wm)(R)])),_:1}),(0,d._)("span",null,(0,c.zw)(null===(l=S.value)||void 0===l?void 0:l.count.share),1)]})),_:1}),(0,d.Wm)(G,{text:"",type:"primary",title:"显示评论",onClick:U},{default:(0,d.w5)((()=>{var l;return[(0,d.Wm)(E,{size:"20"},{default:(0,d.w5)((()=>[(0,d.Wm)(J,{name:"comment"})])),_:1}),(0,d._)("span",null,(0,c.zw)(null===(l=S.value)||void 0===l?void 0:l.count.comment),1)]})),_:1}),(0,d.Wm)(G,{text:"",type:"primary",title:"收藏"},{default:(0,d.w5)((()=>{var l,e;return[(null===(l=S.value)||void 0===l?void 0:l.isSubscribed)?((0,d.wg)(),(0,d.j4)(E,{key:0,size:"20"},{default:(0,d.w5)((()=>[(0,d.Wm)(L)])),_:1})):((0,d.wg)(),(0,d.j4)(E,{key:1,size:"20"},{default:(0,d.w5)((()=>[(0,d.Wm)(M)])),_:1})),(0,d._)("span",null,(0,c.zw)(null===(e=S.value)||void 0===e?void 0:e.count.subscribed),1)]})),_:1})])])]),(0,d._)("div",H,[(0,d.Wm)(f.Z,{songs:V.value,count:null===(q=S.value)||void 0===q?void 0:q.count.song},null,8,["songs","count"])])])),[[O,x]]),(0,d.Wm)(N,{modelValue:C.value,"onUpdate:modelValue":e[0]||(e[0]=l=>C.value=l),"with-header":!1},{default:(0,d.w5)((()=>{var l,e,n,u;return[(0,d.Wm)(g.Z,{coverImg:null===(e=null===(l=S.value)||void 0===l?void 0:l.cover)||void 0===e?void 0:e.url,description:null===(n=S.value)||void 0===n?void 0:n.description,tags:null===(u=S.value)||void 0===u?void 0:u.tags},null,8,["coverImg","description","tags"])]})),_:1},8,["modelValue"]),(0,d.Wm)(N,{modelValue:P.value,"onUpdate:modelValue":e[1]||(e[1]=l=>P.value=l),"with-header":!1},{default:(0,d.w5)((()=>[(0,d.Wm)(w.Z,{id:(0,r.SU)(n),type:"歌单"},null,8,["id"])])),_:1},8,["modelValue"])],64)}}}),V=n(465);const Y=(0,V.Z)(S,[["__scopeId","data-v-32ab9d14"]]);var Z=Y}}]);