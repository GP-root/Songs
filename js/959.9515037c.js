"use strict";(self["webpackChunksongs"]=self["webpackChunksongs"]||[]).push([[959],{9260:function(e,n,t){t.d(n,{$2:function(){return c},BG:function(){return r},_n:function(){return m},l7:function(){return p},qh:function(){return d},yu:function(){return v}});t(7658);var l=t(9644),o=t(1809),i=t(708),a=function(e,n,t,l){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function a(e){try{u(l.next(e))}catch(n){i(n)}}function s(e){try{u(l["throw"](e))}catch(n){i(n)}}function u(e){e.done?t(e.value):o(e.value).then(a,s)}u((l=l.apply(e,n||[])).next())}))};const s=(0,l.a2)(),u=(0,l.w9)();function c(e,n){const t=s.push_playList(e);n&&(0,i.y)({message:t?`[ ${e.song.name} ]成功添加到播放列表`:`播放列表中已存在[ ${e.song.name} ]`,type:t?"success":"warning"})}function r(e,n,t){return a(this,void 0,void 0,(function*(){d(n&&"歌单"===t?yield(0,o.LH)(n):e)}))}function d(e){s.update_playList((n=>{e.forEach((e=>{n.push(e)}))})),u.update_song(e[0]),(0,i.y)({message:"已添加到播放列表"})}function m(e){u.update_song(e),c(e,!1)}function p(e,n,t){return a(this,void 0,void 0,(function*(){if(console.log(n,t),n&&"歌单"===t){let t=[];e.forEach((e=>{t.push(e.song.id)})),(yield(0,o.s9)("del",n,t))&&(0,i.y)({message:"成功删除,请刷新页面"})}}))}function v(e,n){return a(this,void 0,void 0,(function*(){if(e&&"歌单"===n){let n=[];(yield(0,o.LH)(e)).forEach((e=>{n.push(e.song.id)})),(yield(0,o.s9)("del",e,n))&&(0,i.y)({message:"成功删除,请刷新页面"})}}))}},9252:function(e,n,t){t.d(n,{Z:function(){return F}});var l=t(6269),o=(t(3450),t(5658),t(2653)),i=(t(5277),t(6174)),a=(t(2373),t(137),t(440)),s=t(4367),u=t(1809),c=t(8970),r=(t(8868),t(4704)),d=(t(4745),t(6770)),m=t(9894),p=(t(1262),t(8643)),v=function(e,n,t,l){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function a(e){try{u(l.next(e))}catch(n){i(n)}}function s(e){try{u(l["throw"](e))}catch(n){i(n)}}function u(e){e.done?t(e.value):o(e.value).then(a,s)}u((l=l.apply(e,n||[])).next())}))};const f={class:"comment","infinite-scroll-immediate":!1,"infinite-scroll-distance":100,"infinite-scroll-delay":500},y={class:"user"},w={class:"content"},g={class:"footer"},_={class:"user"},h=["onClick"],k={class:"content"},b={class:"footer"};var C=(0,a.aZ)({__name:"comment-floor",props:{parentComment:{type:Object,required:!0},id:{type:String,required:!0},type:{type:String,required:!0}},setup(e){const n=e,t=(0,s.iH)([]);(0,a.bv)((()=>v(this,void 0,void 0,(function*(){t.value=yield(0,u.nm)(n.parentComment.id,n.id,n.type)})))),(0,a.ic)((()=>v(this,void 0,void 0,(function*(){t.value=[],t.value=yield(0,u.nm)(n.parentComment.id,n.id,n.type)}))));const i=e=>v(this,void 0,void 0,(function*(){(0,u.xG)(n.id,t.value[e].id,t.value[e].liked?0:1,n.type).then((n=>{n&&(t.value[e].liked=!t.value[e].liked)}))})),c=()=>{console.log(213)};return(n,s)=>{const u=m.F8,v=d.Z,C=r.gn,S=o.Mr,W=l.n;return(0,a.wg)(),(0,a.j4)(S,null,{default:(0,a.w5)((()=>{var n,l,o,s,r,d;return[(0,a.wy)(((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",y,[(0,a._)("div",null,[(0,a.Wm)(u,{src:null===(n=e.parentComment)||void 0===n?void 0:n.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,a._)("span",null,(0,p.zw)(null===(l=e.parentComment)||void 0===l?void 0:l.user.name),1)]),(0,a._)("div",{class:(0,p.C_)({"like-base":!0,like:null===(o=e.parentComment)||void 0===o?void 0:o.liked})},[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{name:"good"})])),_:1}),(0,a._)("span",null,(0,p.zw)(null===(s=e.parentComment)||void 0===s?void 0:s.likeCount),1)],2)]),(0,a._)("div",w,[(0,a._)("span",null,(0,p.zw)(null===(r=e.parentComment)||void 0===r?void 0:r.content),1)]),(0,a._)("div",g,[(0,a._)("span",null,(0,p.zw)(null===(d=e.parentComment)||void 0===d?void 0:d.time),1)])])),[[W,c]]),(0,a._)("h4",null,"全部回复 "+(0,p.zw)(e.parentComment.replayCount),1),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.value,((e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:"comment",key:e.id},[(0,a._)("div",_,[(0,a._)("div",null,[(0,a.Wm)(u,{src:e.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,a._)("span",null,(0,p.zw)(e.user.name),1)]),(0,a._)("div",{class:(0,p.C_)({"like-base":!0,like:e.liked}),onClick:e=>i(n)},[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{name:"good"})])),_:1}),(0,a._)("span",null,(0,p.zw)(e.likeCount),1)],10,h)]),(0,a._)("div",k,[(0,a._)("span",null,(0,p.zw)(e.content),1)]),(0,a._)("div",b,[(0,a._)("span",null,(0,p.zw)(e.time),1)])])))),128))]})),_:1})}}}),S=t(465);const W=(0,S.Z)(C,[["__scopeId","data-v-1ae71a20"]]);var z=W,H=function(e,n,t,l){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function a(e){try{u(l.next(e))}catch(n){i(n)}}function s(e){try{u(l["throw"](e))}catch(n){i(n)}}function u(e){e.done?t(e.value):o(e.value).then(a,s)}u((l=l.apply(e,n||[])).next())}))};const U={class:"user"},Z=["onClick"],q={class:"content"},j={class:"footer"},x=["onClick"];var D=(0,a.aZ)({__name:"comment-item",props:{comments:{type:Array,required:!0},id:{type:String,required:!0},type:{type:String,required:!0}},setup(e){const n=e,t=e=>H(this,void 0,void 0,(function*(){(0,u.xG)(n.id,n.comments[e].id,n.comments[e].liked?0:1,n.type).then((t=>{t&&(n.comments[e].liked=!n.comments[e].liked)}))})),l=(0,s.iH)(!1),o=(0,s.iH)(),i=e=>{l.value=!l.value,o.value=n.comments[e]};return(n,s)=>{const u=m.F8,v=d.Z,f=r.gn,y=c.zd;return(0,a.wg)(),(0,a.iD)(a.HY,null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.comments,((e,n)=>((0,a.wg)(),(0,a.iD)("div",{class:"comment",key:e.id},[(0,a._)("div",U,[(0,a._)("div",null,[(0,a.Wm)(u,{src:e.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,a._)("span",null,(0,p.zw)(e.user.name),1)]),(0,a._)("div",{class:(0,p.C_)({"like-base":!0,like:e.liked}),onClick:e=>t(n)},[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(v,{name:"good"})])),_:1}),(0,a._)("span",null,(0,p.zw)(e.likeCount),1)],10,Z)]),(0,a._)("div",q,[(0,a._)("span",null,(0,p.zw)(e.content),1)]),(0,a._)("div",j,[(0,a._)("span",null,(0,p.zw)(e.time),1),e.replayCount>0?((0,a.wg)(),(0,a.iD)("span",{key:0,onClick:e=>i(n)},[(0,a._)("span",null,"显示更多回复 "+(0,p.zw)(e.replayCount),1)],8,x)):(0,a.kq)("",!0)])])))),128)),(0,a.Wm)(y,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e),"append-to-body":!0,"with-header":!1},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{parentComment:o.value,id:e.id,type:e.type},null,8,["parentComment","id","type"])])),_:1},8,["modelValue"])],64)}}});const E=(0,S.Z)(D,[["__scopeId","data-v-72f6c75c"]]);var I=E,T=function(e,n,t,l){function o(e){return e instanceof t?e:new t((function(n){n(e)}))}return new(t||(t=Promise))((function(t,i){function a(e){try{u(l.next(e))}catch(n){i(n)}}function s(e){try{u(l["throw"](e))}catch(n){i(n)}}function u(e){e.done?t(e.value):o(e.value).then(a,s)}u((l=l.apply(e,n||[])).next())}))};const $=(0,a._)("span",null,"推荐(error)",-1),M=(0,a._)("span",null,"最热(error)",-1),B=(0,a._)("span",null,"时间",-1);var L=(0,a.aZ)({__name:"index",props:{id:{type:String,required:!0},type:{type:String,required:!0}},setup(e){const n=e,t=(0,s.iH)([]),c=(0,s.iH)(1),r=(0,s.iH)([]),d=(0,s.iH)(1),m=(0,s.iH)([]),p=(0,s.iH)(1);(0,a.bv)((()=>T(this,void 0,void 0,(function*(){r.value=yield(0,u.d7)(n.id,"热度",n.type,d.value),t.value=yield(0,u.d7)(n.id,"推荐",n.type,c.value),m.value=yield(0,u.d7)(n.id,"时间",n.type,p.value)}))));const v=(0,s.iH)("recommend"),f=()=>T(this,void 0,void 0,(function*(){"hot"===v.value||"recommend"===v.value||"new"===v.value&&(m.value=m.value.concat(yield(0,u.d7)(n.id,"时间",n.type,++p.value,20,m.value[m.value.length-1].timeStamp)))}));return(n,s)=>{const u=i.p8,c=i.Ub,d=o.Mr,p=l.n;return(0,a.wg)(),(0,a.j4)(d,null,{default:(0,a.w5)((()=>[(0,a.wy)(((0,a.wg)(),(0,a.j4)(c,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),"infinite-scroll-immediate":!1,"infinite-scroll-delay":1e3},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{name:"recommend"},{label:(0,a.w5)((()=>[$])),default:(0,a.w5)((()=>[(0,a.Wm)(I,{comments:t.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1}),(0,a.Wm)(u,{name:"hot"},{label:(0,a.w5)((()=>[M])),default:(0,a.w5)((()=>[(0,a.Wm)(I,{comments:r.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1}),(0,a.Wm)(u,{name:"new"},{label:(0,a.w5)((()=>[B])),_:1}),(0,a.Wm)(I,{comments:m.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1},8,["modelValue"])),[[p,f]])])),_:1})}}});const Y=L;var F=Y},5838:function(e,n,t){t.d(n,{Z:function(){return y}});var l=t(2653),o=(t(3450),t(5277),t(2516)),i=(t(8843),t(9894)),a=(t(1262),t(440)),s=t(8643);const u=e=>((0,a.dD)("data-v-1219146a"),e=e(),(0,a.Cn)(),e),c={key:0,class:"tag"},r=u((()=>(0,a._)("div",{class:"line"},null,-1))),d={class:"description"},m={key:0};var p=(0,a.aZ)({__name:"description",props:{coverImg:{type:String,required:!0},description:{type:String,required:!0},tags:{type:Array,default:[]},albumType:{type:String,default:""}},setup(e){return(n,t)=>{const u=i.F8,p=o.Ks,v=l.Mr;return(0,a.wg)(),(0,a.j4)(v,null,{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.Wm)(u,{class:"img",src:e.coverImg,fit:"fill"},null,8,["src"])]),e.tags.length>0?((0,a.wg)(),(0,a.iD)("div",c,[(0,a.Uk)(" 标签: "),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.tags,(e=>((0,a.wg)(),(0,a.j4)(p,{style:{"margin-left":"10px"},size:"small",round:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e),1)])),_:2},1024)))),256))])):(0,a.kq)("",!0),r,(0,a._)("div",d,[e.albumType?((0,a.wg)(),(0,a.iD)("p",m,"专辑类别："+(0,s.zw)(e.albumType),1)):(0,a.kq)("",!0),(0,a._)("span",null,(0,s.zw)(e.description),1)])])),_:1})}}}),v=t(465);const f=(0,v.Z)(p,[["__scopeId","data-v-1219146a"]]);var y=f},2748:function(e,n,t){t.d(n,{Z:function(){return _}});var l=t(114),o=(t(3450),t(7724),t(4704)),i=(t(4745),t(6770)),a=t(7755),s=(t(6886),t(2607),t(7658),t(440)),u=t(8643),c=t(4367),r=t(4592),d=t(4804),m=t(9260),p=t(9403);const v=["onClick"],f={class:"operate-back"};var y=(0,s.aZ)({__name:"song-table-common",props:{songs:{type:Array,required:!0},songsCount:{type:Number,default:0},tableWidth:{type:String,default:"100%"}},setup(e){const n=e,t=(0,d.tv)(),y=(0,s.Fl)((()=>n.songs?n.songs.length:0));return(d,w)=>{const g=l.$Y,_=a.mi,h=i.Z,k=o.gn,b=l.eI;return(0,s.wg)(),(0,s.j4)(b,{data:n.songs,style:(0,u.j5)({width:n.tableWidth}),"row-style":{height:"50px"},lazy:!1,onRowClick:(0,c.SU)(m._n),"row-class-name":"table-row","header-row-class-name":"table-header"},{default:(0,s.w5)((()=>[(0,s.Wm)(g,{type:"index",label:(0,c.SU)(y)+"首",width:"80"},null,8,["label"]),(0,s.Wm)(g,{label:"歌曲标题"},{default:(0,s.w5)((e=>[(0,s._)("span",null,(0,u.zw)(e.row.song.name),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.row.song.alia,(e=>((0,s.wg)(),(0,s.iD)("span",null," ("+(0,u.zw)(e)+") ",1)))),256))])),_:1}),(0,s.Wm)(g,{label:"歌手"},{default:(0,s.w5)((e=>[(0,s.Wm)(p.Z,{artists:e.row.artists.artists},null,8,["artists"])])),_:1}),(0,s.Wm)(g,{label:"专辑"},{default:(0,s.w5)((e=>[(0,s._)("span",{class:"album",onClick:(0,r.iM)((n=>(0,c.SU)(t).push(`/album/${e.row.album.id}`)),["stop"])},(0,u.zw)(e.row.album.name),9,v)])),_:1}),(0,s.Wm)(g,null,{header:(0,s.w5)((()=>[(0,s.WI)(d.$slots,"header",{},(()=>[(0,s.Wm)(_,{size:"small",onClick:w[0]||(w[0]=(0,r.iM)((n=>(0,c.SU)(m.BG)(e.songs)),["stop"]))},{default:(0,s.w5)((()=>[(0,s.Uk)("播放全部")])),_:1})]))])),default:(0,s.w5)((e=>[(0,s._)("div",f,[(0,s.Wm)(k,{title:"添加到播放列表",size:"25",class:"operate",onClick:(0,r.iM)((n=>(0,c.SU)(m.$2)(e.row,!0)),["stop"])},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{name:"add2List"})])),_:2},1032,["onClick"]),(0,s.WI)(d.$slots,"operate")])])),_:3})])),_:3},8,["data","style","onRowClick"])}}}),w=t(465);const g=(0,w.Z)(y,[["__scopeId","data-v-4642ac48"]]);var _=g},6269:function(e,n,t){t.d(n,{n:function(){return h}});var l=t(440),o=t(8643),i=t(2281),a=t(1110),s=t(3515),u=t(5868);const c="ElInfiniteScroll",r=50,d=200,m=0,p={delay:{type:Number,default:d},distance:{type:Number,default:m},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},v=(e,n)=>Object.entries(p).reduce(((t,[l,o])=>{var i,a;const{type:s,default:u}=o,c=e.getAttribute(`infinite-scroll-${l}`);let r=null!=(a=null!=(i=n[c])?i:c)?a:u;return r="false"!==r&&r,r=s(r),t[l]=Number.isNaN(r)?u:r,t}),{}),f=e=>{const{observer:n}=e[c];n&&(n.disconnect(),delete e[c].observer)},y=(e,n)=>{const{container:t,containerEl:l,instance:o,observer:i,lastScrollTop:s}=e[c],{disabled:u,distance:r}=v(e,o),{clientHeight:d,scrollHeight:m,scrollTop:p}=l,f=p-s;if(e[c].lastScrollTop=p,i||u||f<0)return;let y=!1;if(t===e)y=m-(d+p)<=r;else{const{clientTop:n,scrollHeight:t}=e,o=(0,a.yP)(e,l);y=p+d>=o+n+t-r}y&&n.call(o)};function w(e,n){const{containerEl:t,instance:l}=e[c],{disabled:o}=v(e,l);o||0===t.clientHeight||(t.scrollHeight<=t.clientHeight?n.call(l):f(e))}const g={async mounted(e,n){const{instance:t,value:a}=n;(0,o.mf)(a)||(0,s._)(c,"'v-infinite-scroll' binding value must be a function"),await(0,l.Y3)();const{delay:d,immediate:m}=v(e,t),p=(0,u.JX)(e,!0),f=p===window?document.documentElement:p,g=(0,i.Z)(y.bind(null,e,a),d);if(p){if(e[c]={instance:t,container:p,containerEl:f,delay:d,cb:a,onScroll:g,lastScrollTop:f.scrollTop},m){const n=new MutationObserver((0,i.Z)(w.bind(null,e,a),r));e[c].observer=n,n.observe(e,{childList:!0,subtree:!0}),w(e,a)}p.addEventListener("scroll",g)}},unmounted(e){const{container:n,onScroll:t}=e[c];null==n||n.removeEventListener("scroll",t),f(e)},async updated(e){if(e[c]){const{containerEl:n,cb:t,observer:l}=e[c];n.clientHeight&&l&&w(e,t)}else await(0,l.Y3)()}},_=g;_.install=e=>{e.directive("InfiniteScroll",_)};const h=_},5658:function(e,n,t){t(3450)},2516:function(e,n,t){t.d(n,{Ks:function(){return w}});var l=t(440),o=t(8643),i=t(4367),a=t(4592),s=t(4704),u=t(6037),c=t(7240),r=t(7922),d=t(8415),m=t(6086);const p=(0,l.aZ)({name:"ElTag"}),v=(0,l.aZ)({...p,props:c.F,emits:c.g,setup(e,{emit:n}){const t=e,c=(0,d.Cd)(),r=(0,m.s3)("tag"),p=(0,l.Fl)((()=>{const{type:e,hit:n,effect:l,closable:o,round:i}=t;return[r.b(),r.is("closable",o),r.m(e),r.m(c.value),r.m(l),r.is("hit",n),r.is("round",i)]})),v=e=>{n("close",e)},f=e=>{n("click",e)};return(e,n)=>e.disableTransitions?((0,l.wg)(),(0,l.iD)("span",{key:0,class:(0,o.C_)((0,i.SU)(p)),style:(0,o.j5)({backgroundColor:e.color}),onClick:f},[(0,l._)("span",{class:(0,o.C_)((0,i.SU)(r).e("content"))},[(0,l.WI)(e.$slots,"default")],2),e.closable?((0,l.wg)(),(0,l.j4)((0,i.SU)(s.gn),{key:0,class:(0,o.C_)((0,i.SU)(r).e("close")),onClick:(0,a.iM)(v,["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)((0,i.SU)(u.Close))])),_:1},8,["class","onClick"])):(0,l.kq)("v-if",!0)],6)):((0,l.wg)(),(0,l.j4)(a.uT,{key:1,name:`${(0,i.SU)(r).namespace.value}-zoom-in-center`,appear:""},{default:(0,l.w5)((()=>[(0,l._)("span",{class:(0,o.C_)((0,i.SU)(p)),style:(0,o.j5)({backgroundColor:e.color}),onClick:f},[(0,l._)("span",{class:(0,o.C_)((0,i.SU)(r).e("content"))},[(0,l.WI)(e.$slots,"default")],2),e.closable?((0,l.wg)(),(0,l.j4)((0,i.SU)(s.gn),{key:0,class:(0,o.C_)((0,i.SU)(r).e("close")),onClick:(0,a.iM)(v,["stop"])},{default:(0,l.w5)((()=>[(0,l.Wm)((0,i.SU)(u.Close))])),_:1},8,["class","onClick"])):(0,l.kq)("v-if",!0)],6)])),_:3},8,["name"]))}});var f=(0,r.Z)(v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]),y=t(5482);const w=(0,y.nz)(f)},7240:function(e,n,t){t.d(n,{F:function(){return i},g:function(){return a}});var l=t(1879),o=t(4324);const i=(0,l.o8)({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:o.k,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),a={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent}}}]);