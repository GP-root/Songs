"use strict";(self["webpackChunksongs"]=self["webpackChunksongs"]||[]).push([[279],{8909:function(e,l,t){t.r(l),t.d(l,{default:function(){return R}});var a=t(6269),n=(t(3450),t(5658),t(8970)),s=(t(8868),t(6770)),u=t(7755),o=(t(6886),t(4704)),i=(t(4745),t(2516)),d=(t(8843),t(9894)),r=(t(1262),t(440)),c=t(8643),v=t(4367),m=t(4804),w=t(9644),p=t(1809),g=t(114),_=(t(7724),t(2607),t(7658),t(4592)),f=t(9260),y=t(9403);const W=["onClick"],b={class:"operate-back"};var h=(0,r.aZ)({__name:"song-table-my",props:{songs:{type:Array,required:!0},songsCount:{type:Number,default:0},tableWidth:{type:String,default:"100%"},type:{type:String,default:void 0},id:{type:Number,default:0}},setup(e){const l=e,t=(0,m.tv)(),a=(0,v.iH)([]),n=e=>{a.value=e};return(i,d)=>{const m=g.$Y,w=u.mi,p=s.Z,h=o.gn,k=g.eI;return(0,r.wg)(),(0,r.j4)(k,{data:l.songs,style:(0,c.j5)({width:l.tableWidth}),"row-style":{height:"50px"},lazy:!1,"row-class-name":"table-row","header-row-class-name":"table-header",onRowClick:(0,v.SU)(f._n),onSelectionChange:n},{default:(0,r.w5)((()=>[(0,r.Wm)(m,{type:"selection",width:"55"}),(0,r.Wm)(m,{type:"index",label:l.songsCount+"首",width:"80"},null,8,["label"]),(0,r.Wm)(m,{label:"歌曲标题"},{default:(0,r.w5)((e=>[(0,r._)("span",null,(0,c.zw)(e.row.song.name),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.row.song.alia,(e=>((0,r.wg)(),(0,r.iD)("span",null," ("+(0,c.zw)(e)+") ",1)))),256))])),_:1}),(0,r.Wm)(m,{label:"歌手"},{default:(0,r.w5)((e=>[(0,r.Wm)(y.Z,{artists:e.row.artists.artists},null,8,["artists"])])),_:1}),(0,r.Wm)(m,{label:"专辑"},{default:(0,r.w5)((e=>[(0,r._)("span",{class:"album",onClick:(0,_.iM)((l=>(0,v.SU)(t).push(`/album/${e.row.album.id}`)),["stop"])},(0,c.zw)(e.row.album.name),9,W)])),_:1}),(0,r.Wm)(m,null,{header:(0,r.w5)((()=>[(0,r.Wm)(w,{size:"small",onClick:d[0]||(d[0]=(0,_.iM)((l=>(0,v.SU)(f.BG)(e.songs,e.id,e.type)),["stop"]))},{default:(0,r.w5)((()=>[(0,r.Uk)("播放全部")])),_:1}),(0,r.Wm)(w,{size:"small",onClick:d[1]||(d[1]=(0,_.iM)((e=>(0,v.SU)(f.qh)(a.value)),["stop"]))},{default:(0,r.w5)((()=>[(0,r.Uk)("播放选中")])),_:1}),(0,r.Wm)(w,{size:"small",onClick:d[2]||(d[2]=(0,_.iM)((l=>(0,v.SU)(f.yu)(e.id,e.type)),["stop"]))},{default:(0,r.w5)((()=>[(0,r.Uk)("删除全部")])),_:1}),(0,r.Wm)(w,{size:"small",onClick:d[3]||(d[3]=(0,_.iM)((l=>(0,v.SU)(f.l7)(a.value,e.id,e.type)),["stop"]))},{default:(0,r.w5)((()=>[(0,r.Uk)("删除选中")])),_:1})])),default:(0,r.w5)((e=>[(0,r._)("div",b,[(0,r.Wm)(h,{title:"添加到播放列表",size:"25",class:"operate",onClick:(0,_.iM)((l=>(0,v.SU)(f.$2)(e.row,!0)),["stop"])},{default:(0,r.w5)((()=>[(0,r.Wm)(p,{name:"add2List"})])),_:2},1032,["onClick"]),(0,r.WI)(i.$slots,"operate")])])),_:3})])),_:3},8,["data","style","onRowClick"])}}}),k=t(465);const C=(0,k.Z)(h,[["__scopeId","data-v-4f13d8ea"]]);var z=C,U=t(2748),S=t(5838),Z=t(9252),I=function(e,l,t,a){function n(e){return e instanceof t?e:new t((function(l){l(e)}))}return new(t||(t=Promise))((function(t,s){function u(e){try{i(a.next(e))}catch(l){s(l)}}function o(e){try{i(a["throw"](e))}catch(l){s(l)}}function i(e){e.done?t(e.value):n(e.value).then(u,o)}i((a=a.apply(e,l||[])).next())}))};const x={class:"back","infinite-scroll-immediate":!1},H={class:"dataBack"},j={class:"data"},Y={class:"title"},D={class:"user"},M={class:"operate"},V={class:"list"};var K=(0,r.aZ)({__name:"detailed",setup(e){const l=(0,m.tv)(),t=(0,w.a2)(),g=l.currentRoute.value.params.id,_=(0,v.iH)(),f=(0,v.iH)([]);let y=0;(0,r.bv)((()=>I(this,void 0,void 0,(function*(){_.value=yield(0,p.EK)(g),f.value=yield(0,p.bY)(g,20),y+=20}))));const W=30,b=()=>I(this,void 0,void 0,(function*(){_.value&&y<_.value.count.songCount&&(y+W<=_.value.count.songCount?(f.value=f.value.concat(yield(0,p.bY)(g,W,y)),y+=W):(f.value=f.value.concat(yield(0,p.bY)(g,_.value.count.songCount-y,y)),y+=_.value.count.songCount-y))})),h=(0,v.iH)(!1),k=()=>{h.value=!h.value},C=(0,v.iH)(!1),K=()=>{C.value=!C.value};return(e,l)=>{var m,w,p,y,W,I,$,R;const q=d.F8,A=i.Ks,B=(0,r.up)("Share"),F=o.gn,L=u.mi,N=s.Z,E=(0,r.up)("Check"),G=(0,r.up)("FolderAdd"),O=n.zd,P=a.n;return(0,r.wg)(),(0,r.iD)(r.HY,null,[(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",x,[(0,r._)("div",H,[(0,r.Wm)(q,{class:"cover",src:null===(m=_.value)||void 0===m?void 0:m.list.cover,fit:"cover",loading:"lazy"},null,8,["src"]),(0,r._)("div",j,[(0,r._)("div",Y,[(0,r._)("span",null,(0,c.zw)(null===(w=_.value)||void 0===w?void 0:w.list.name),1),((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(null===(p=_.value)||void 0===p?void 0:p.list.tags,(e=>((0,r.wg)(),(0,r.j4)(A,{class:"tag",size:"small",round:""},{default:(0,r.w5)((()=>[(0,r.Uk)((0,c.zw)(e),1)])),_:2},1024)))),256))]),(0,r._)("div",D,[(0,r.Wm)(q,{src:null===(y=_.value)||void 0===y?void 0:y.user.cover,class:"avatar"},null,8,["src"]),(0,r._)("span",null,(0,c.zw)(null===(W=_.value)||void 0===W?void 0:W.user.name),1)]),(0,r._)("div",{class:"description",onClick:k},[(0,r._)("span",null,(0,c.zw)(null===(I=_.value)||void 0===I?void 0:I.list.description),1)]),(0,r._)("div",M,[(0,r.Wm)(L,{text:"",type:"primary",title:"分享"},{default:(0,r.w5)((()=>{var e;return[(0,r.Wm)(F,{size:"20"},{default:(0,r.w5)((()=>[(0,r.Wm)(B)])),_:1}),(0,r._)("span",null,(0,c.zw)(null===(e=_.value)||void 0===e?void 0:e.count.shareCount),1)]})),_:1}),(0,r.Wm)(L,{text:"",type:"primary",title:"显示评论",onClick:K},{default:(0,r.w5)((()=>{var e;return[(0,r.Wm)(F,{size:"20"},{default:(0,r.w5)((()=>[(0,r.Wm)(N,{name:"comment"})])),_:1}),(0,r._)("span",null,(0,c.zw)(null===(e=_.value)||void 0===e?void 0:e.count.commentCount),1)]})),_:1}),(0,r.Wm)(L,{text:"",type:"primary",title:"收藏"},{default:(0,r.w5)((()=>{var e,l;return[(null===(e=_.value)||void 0===e?void 0:e.list.subscribed)?((0,r.wg)(),(0,r.j4)(F,{key:0,size:"20"},{default:(0,r.w5)((()=>[(0,r.Wm)(E)])),_:1})):((0,r.wg)(),(0,r.j4)(F,{key:1,size:"20"},{default:(0,r.w5)((()=>[(0,r.Wm)(G)])),_:1})),(0,r._)("span",null,(0,c.zw)(null===(l=_.value)||void 0===l?void 0:l.count.subscribedCount),1)]})),_:1})])])]),(0,r._)("div",V,[(0,v.SU)(t).myCreatedListID.indexOf(parseInt((0,v.SU)(g)))>-1?((0,r.wg)(),(0,r.j4)(z,{key:0,id:parseInt((0,v.SU)(g)),type:"歌单",songs:f.value,"songs-count":null===($=_.value)||void 0===$?void 0:$.count.songCount},null,8,["id","songs","songs-count"])):((0,r.wg)(),(0,r.j4)(U.Z,{key:1,songs:f.value,"songs-count":null===(R=_.value)||void 0===R?void 0:R.count.songCount},null,8,["songs","songs-count"]))])])),[[P,b]]),(0,r.Wm)(O,{modelValue:h.value,"onUpdate:modelValue":l[0]||(l[0]=e=>h.value=e),"with-header":!1},{default:(0,r.w5)((()=>[(0,r.Wm)(S.Z,{coverImg:_.value.list.cover,description:_.value.list.description,tags:_.value.list.tags},null,8,["coverImg","description","tags"])])),_:1},8,["modelValue"]),(0,r.Wm)(O,{modelValue:C.value,"onUpdate:modelValue":l[1]||(l[1]=e=>C.value=e),"with-header":!1},{default:(0,r.w5)((()=>[(0,r.Wm)(Z.Z,{id:(0,v.SU)(g),type:"歌单"},null,8,["id"])])),_:1},8,["modelValue"])],64)}}});const $=(0,k.Z)(K,[["__scopeId","data-v-f328eb22"]]);var R=$}}]);