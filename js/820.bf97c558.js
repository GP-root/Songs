"use strict";(self["webpackChunksongs"]=self["webpackChunksongs"]||[]).push([[820],{9252:function(e,n,l){l.d(n,{Z:function(){return F}});var t=l(6269),o=(l(3450),l(5658),l(2653)),a=(l(5277),l(6174)),i=(l(2373),l(137),l(440)),s=l(4367),c=l(4059),u=l(8970),r=(l(8868),l(4704)),d=(l(4745),l(6770)),m=l(9894),p=(l(1262),l(8643)),v=l(8670),f=function(e,n,l,t){function o(e){return e instanceof l?e:new l((function(n){n(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{c(t.next(e))}catch(n){a(n)}}function s(e){try{c(t["throw"](e))}catch(n){a(n)}}function c(e){e.done?l(e.value):o(e.value).then(i,s)}c((t=t.apply(e,n||[])).next())}))};const w={class:"comment","infinite-scroll-immediate":!1,"infinite-scroll-distance":100,"infinite-scroll-delay":500},y={class:"user"},_={class:"content"},g={class:"footer"},k={class:"user"},b=["onClick"],h={class:"content"},C={class:"footer"};var z=(0,i.aZ)({__name:"comment-floor",props:{parentComment:null,id:null,type:null},setup(e){const n=e,l=(0,s.iH)([]);function a(e){return f(this,void 0,void 0,(function*(){c.Ab.like(n.id,l.value[e].id,l.value[e].isLiked?0:1,n.type).then((n=>{n&&(l.value[e].isLiked=!l.value[e].isLiked)}))}))}function u(){}return(0,i.bv)((()=>f(this,void 0,void 0,(function*(){l.value=yield c.Ab.floor(n.parentComment.id,n.id,n.type)})))),(0,i.ic)((()=>f(this,void 0,void 0,(function*(){l.value=[],l.value=yield c.Ab.floor(n.parentComment.id,n.id,n.type)})))),(n,s)=>{const c=m.F8,v=d.Z,f=r.gn,z=o.Mr,W=t.n;return(0,i.wg)(),(0,i.j4)(z,null,{default:(0,i.w5)((()=>{var n,t,o,s,r,d;return[(0,i.wy)(((0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",y,[(0,i._)("div",null,[(0,i.Wm)(c,{src:null===(n=e.parentComment)||void 0===n?void 0:n.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,i._)("span",null,(0,p.zw)(null===(t=e.parentComment)||void 0===t?void 0:t.user.name),1)]),(0,i._)("div",{class:(0,p.C_)({"like-base":!0,like:null===(o=e.parentComment)||void 0===o?void 0:o.isLiked})},[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{name:"good"})])),_:1}),(0,i._)("span",null,(0,p.zw)(null===(s=e.parentComment)||void 0===s?void 0:s.count.like),1)],2)]),(0,i._)("div",_,[(0,i._)("span",null,(0,p.zw)(null===(r=e.parentComment)||void 0===r?void 0:r.content),1)]),(0,i._)("div",g,[(0,i._)("span",null,(0,p.zw)(null===(d=e.parentComment)||void 0===d?void 0:d.time),1)])])),[[W,u]]),(0,i._)("h4",null,"全部回复 "+(0,p.zw)(e.parentComment.count.replay),1),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(l.value,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"comment",key:e.id},[(0,i._)("div",k,[(0,i._)("div",null,[(0,i.Wm)(c,{src:e.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,i._)("span",null,(0,p.zw)(e.user.name),1)]),(0,i._)("div",{class:(0,p.C_)({"like-base":!0,like:e.isLiked}),onClick:e=>a(n)},[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{name:"good"})])),_:1}),(0,i._)("span",null,(0,p.zw)(e.count.like),1)],10,b)]),(0,i._)("div",h,[(0,i._)("span",null,(0,p.zw)(e.content),1)]),(0,i._)("div",C,[(0,i._)("span",null,(0,p.zw)(e.time),1)])])))),128))]})),_:1})}}}),W=l(465);const S=(0,W.Z)(z,[["__scopeId","data-v-47bbbd76"]]);var H=S,Z=function(e,n,l,t){function o(e){return e instanceof l?e:new l((function(n){n(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{c(t.next(e))}catch(n){a(n)}}function s(e){try{c(t["throw"](e))}catch(n){a(n)}}function c(e){e.done?l(e.value):o(e.value).then(i,s)}c((t=t.apply(e,n||[])).next())}))};const j={class:"user"},U=["onClick"],L={class:"content"},T={class:"footer"},D=["onClick"];var I=(0,i.aZ)({__name:"comment-item",props:{comments:null,id:null,type:null},setup(e){const n=e,l=e=>Z(this,void 0,void 0,(function*(){(0,v.xG)(n.id,n.comments[e].id,n.comments[e].isLiked?0:1,n.type).then((l=>{l&&(n.comments[e].isLiked=!n.comments[e].isLiked)}))})),t=(0,s.iH)(!1),o=(0,s.iH)(),a=e=>{t.value=!t.value,o.value=n.comments[e]};return(n,s)=>{const c=m.F8,v=d.Z,f=r.gn,w=u.zd;return(0,i.wg)(),(0,i.iD)(i.HY,null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.comments,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"comment",key:e.id},[(0,i._)("div",j,[(0,i._)("div",null,[(0,i.Wm)(c,{src:e.user.cover,class:"avatar",loading:"lazy"},null,8,["src"]),(0,i._)("span",null,(0,p.zw)(e.user.name),1)]),(0,i._)("div",{class:(0,p.C_)({"like-base":!0,like:e.isLiked}),onClick:e=>l(n)},[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{name:"good"})])),_:1}),(0,i._)("span",null,(0,p.zw)(e.count.like),1)],10,U)]),(0,i._)("div",L,[(0,i._)("span",null,(0,p.zw)(e.content),1)]),(0,i._)("div",T,[(0,i._)("span",null,(0,p.zw)(e.time),1),e.count.replay>0?((0,i.wg)(),(0,i.iD)("span",{key:0,onClick:e=>a(n)},[(0,i._)("span",null,"显示更多回复 "+(0,p.zw)(e.count.replay),1)],8,D)):(0,i.kq)("",!0)])])))),128)),(0,i.Wm)(w,{modelValue:t.value,"onUpdate:modelValue":s[0]||(s[0]=e=>t.value=e),"append-to-body":!0,"with-header":!1},{default:(0,i.w5)((()=>[(0,i.Wm)(H,{parentComment:o.value,id:e.id,type:e.type},null,8,["parentComment","id","type"])])),_:1},8,["modelValue"])],64)}}});const E=(0,W.Z)(I,[["__scopeId","data-v-39e7c27f"]]);var x=E,A=function(e,n,l,t){function o(e){return e instanceof l?e:new l((function(n){n(e)}))}return new(l||(l=Promise))((function(l,a){function i(e){try{c(t.next(e))}catch(n){a(n)}}function s(e){try{c(t["throw"](e))}catch(n){a(n)}}function c(e){e.done?l(e.value):o(e.value).then(i,s)}c((t=t.apply(e,n||[])).next())}))};const B=(0,i._)("span",null,"推荐(error)",-1),M=(0,i._)("span",null,"最热(error)",-1),q=(0,i._)("span",null,"时间",-1);var Y=(0,i.aZ)({__name:"index",props:{id:null,type:null},setup(e){const n=e,l=(0,s.iH)([]),u=(0,s.iH)(1),r=(0,s.iH)([]),d=(0,s.iH)(1),m=(0,s.iH)([]),p=(0,s.iH)(1);(0,i.bv)((()=>A(this,void 0,void 0,(function*(){r.value=yield c.Ab.get(n.id,"热度",n.type,d.value),l.value=yield c.Ab.get(n.id,"推荐",n.type,u.value),m.value=yield c.Ab.get(n.id,"时间",n.type,p.value)}))));const v=(0,s.iH)("recommend"),f=()=>A(this,void 0,void 0,(function*(){"hot"===v.value||"recommend"===v.value||"new"===v.value&&(m.value=m.value.concat(yield c.Ab.get(n.id,"时间",n.type,++p.value,20,m.value[m.value.length-1].timeStamp)))}));return(n,s)=>{const c=a.p8,u=a.Ub,d=o.Mr,p=t.n;return(0,i.wg)(),(0,i.j4)(d,null,{default:(0,i.w5)((()=>[(0,i.wy)(((0,i.wg)(),(0,i.j4)(u,{modelValue:v.value,"onUpdate:modelValue":s[0]||(s[0]=e=>v.value=e),"infinite-scroll-immediate":!1,"infinite-scroll-delay":1e3},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{name:"recommend"},{label:(0,i.w5)((()=>[B])),default:(0,i.w5)((()=>[(0,i.Wm)(x,{comments:l.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1}),(0,i.Wm)(c,{name:"hot"},{label:(0,i.w5)((()=>[M])),default:(0,i.w5)((()=>[(0,i.Wm)(x,{comments:r.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1}),(0,i.Wm)(c,{name:"new"},{label:(0,i.w5)((()=>[q])),_:1}),(0,i.Wm)(x,{comments:m.value,type:e.type,id:e.id},null,8,["comments","type","id"])])),_:1},8,["modelValue"])),[[p,f]])])),_:1})}}});const $=Y;var F=$},7578:function(e,n,l){l.d(n,{Z:function(){return y}});var t=l(2653),o=(l(3450),l(5277),l(2516)),a=(l(8843),l(9894)),i=(l(1262),l(440)),s=l(8643);const c=e=>((0,i.dD)("data-v-7a6568c0"),e=e(),(0,i.Cn)(),e),u={key:0,class:"tag"},r=c((()=>(0,i._)("span",null,"标签:",-1))),d=c((()=>(0,i._)("div",{class:"line"},null,-1))),m={class:"description"},p={key:0};var v=(0,i.aZ)({__name:"description",props:{coverImg:null,description:null,tags:null,albumType:null},setup(e){const n=e;return(l,c)=>{const v=a.F8,f=o.Ks,w=t.Mr;return(0,i.wg)(),(0,i.j4)(w,null,{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i.Wm)(v,{class:"img",src:n.coverImg,fit:"fill"},null,8,["src"])]),n.tags?((0,i.wg)(),(0,i.iD)("div",u,[r,((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.tags,(e=>((0,i.wg)(),(0,i.j4)(f,{key:e,type:"info",size:"small"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,s.zw)(e),1)])),_:2},1024)))),128))])):(0,i.kq)("",!0),d,(0,i._)("div",m,[e.albumType?((0,i.wg)(),(0,i.iD)("p",p,"专辑类别："+(0,s.zw)(e.albumType),1)):(0,i.kq)("",!0),(0,i._)("span",null,(0,s.zw)(e.description),1)])])),_:1})}}}),f=l(465);const w=(0,f.Z)(v,[["__scopeId","data-v-7a6568c0"]]);var y=w},5170:function(e,n,l){l.d(n,{Z:function(){return k}});var t=l(114),o=(l(3450),l(7724),l(4704)),a=(l(4745),l(6770)),i=(l(2607),l(7658),l(440)),s=l(8643),c=l(4592),u=l(4367),r=l(4804),d=l(708),m=l(9226),p=l(9644);const v=["title"],f=["onClick"],w={class:"operate-back"};var y=(0,i.aZ)({__name:"songs-table",props:{songs:null,count:null,showTitle:{type:Boolean,default:!0},showSingers:{type:Boolean,default:!0},showAlbum:{type:Boolean,default:!0},showOperation:{type:Boolean,default:!0}},setup(e){const n=e,l=(0,r.tv)(),y=(0,p.a2)(),_=(0,p.w9)();function g(e){console.log(123),_.play(e),y.push_playList(e)}function k(e){y.push_playList(e),(0,d.y)({message:`${e.name} 已添加到播放列表`,type:"success",duration:800})}return(r,d)=>{const p=t.$Y,y=a.Z,_=o.gn,b=t.eI;return(0,i.wg)(),(0,i.j4)(b,{data:n.songs,"row-style":{height:"50px"},lazy:!0,onRowClick:g,"row-class-name":"table-row","header-row-class-name":"table-header"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{type:"index",label:(e.count||e.songs.length)+"首",width:"80"},null,8,["label"]),e.showTitle?((0,i.wg)(),(0,i.j4)(p,{key:0,label:"歌曲"},{default:(0,i.w5)((e=>[(0,i._)("span",{title:e.row.name},(0,s.zw)(e.row.name),9,v),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.row.alias,(e=>((0,i.wg)(),(0,i.iD)("span",{key:e}," ("+(0,s.zw)(e)+") ",1)))),128))])),_:1})):(0,i.kq)("",!0),e.showSingers?((0,i.wg)(),(0,i.j4)(p,{key:1,label:"歌手"},{default:(0,i.w5)((e=>[(0,i.Wm)(m.Z,{singers:e.row.singers.singers},null,8,["singers"])])),_:1})):(0,i.kq)("",!0),e.showAlbum?((0,i.wg)(),(0,i.j4)(p,{key:2,label:"专辑"},{default:(0,i.w5)((e=>[(0,i._)("span",{class:"album",onClick:(0,c.iM)((n=>(0,u.SU)(l).push(`/album/${e.row.album.id}`)),["stop"])},(0,s.zw)(e.row.album.name),9,f)])),_:1})):(0,i.kq)("",!0),e.showOperation?((0,i.wg)(),(0,i.j4)(p,{key:3},{header:(0,i.w5)((()=>[])),default:(0,i.w5)((e=>[(0,i._)("div",w,[(0,i.Wm)(_,{title:"添加到播放列表",size:"25",class:"operate",onClick:(0,c.iM)((n=>k(e.row)),["stop"])},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{name:"add2List"})])),_:2},1032,["onClick"]),(0,i.WI)(r.$slots,"operate")])])),_:3})):(0,i.kq)("",!0)])),_:3},8,["data"])}}}),_=l(465);const g=(0,_.Z)(y,[["__scopeId","data-v-0f0c3d6e"]]);var k=g},6269:function(e,n,l){l.d(n,{n:function(){return k}});var t=l(440),o=l(8643),a=l(2281),i=l(1110),s=l(3515),c=l(5868);const u="ElInfiniteScroll",r=50,d=200,m=0,p={delay:{type:Number,default:d},distance:{type:Number,default:m},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},v=(e,n)=>Object.entries(p).reduce(((l,[t,o])=>{var a,i;const{type:s,default:c}=o,u=e.getAttribute(`infinite-scroll-${t}`);let r=null!=(i=null!=(a=n[u])?a:u)?i:c;return r="false"!==r&&r,r=s(r),l[t]=Number.isNaN(r)?c:r,l}),{}),f=e=>{const{observer:n}=e[u];n&&(n.disconnect(),delete e[u].observer)},w=(e,n)=>{const{container:l,containerEl:t,instance:o,observer:a,lastScrollTop:s}=e[u],{disabled:c,distance:r}=v(e,o),{clientHeight:d,scrollHeight:m,scrollTop:p}=t,f=p-s;if(e[u].lastScrollTop=p,a||c||f<0)return;let w=!1;if(l===e)w=m-(d+p)<=r;else{const{clientTop:n,scrollHeight:l}=e,o=(0,i.yP)(e,t);w=p+d>=o+n+l-r}w&&n.call(o)};function y(e,n){const{containerEl:l,instance:t}=e[u],{disabled:o}=v(e,t);o||0===l.clientHeight||(l.scrollHeight<=l.clientHeight?n.call(t):f(e))}const _={async mounted(e,n){const{instance:l,value:i}=n;(0,o.mf)(i)||(0,s._)(u,"'v-infinite-scroll' binding value must be a function"),await(0,t.Y3)();const{delay:d,immediate:m}=v(e,l),p=(0,c.JX)(e,!0),f=p===window?document.documentElement:p,_=(0,a.Z)(w.bind(null,e,i),d);if(p){if(e[u]={instance:l,container:p,containerEl:f,delay:d,cb:i,onScroll:_,lastScrollTop:f.scrollTop},m){const n=new MutationObserver((0,a.Z)(y.bind(null,e,i),r));e[u].observer=n,n.observe(e,{childList:!0,subtree:!0}),y(e,i)}p.addEventListener("scroll",_)}},unmounted(e){const{container:n,onScroll:l}=e[u];null==n||n.removeEventListener("scroll",l),f(e)},async updated(e){if(e[u]){const{containerEl:n,cb:l,observer:t}=e[u];n.clientHeight&&t&&y(e,l)}else await(0,t.Y3)()}},g=_;g.install=e=>{e.directive("InfiniteScroll",g)};const k=g},5658:function(e,n,l){l(3450)},2516:function(e,n,l){l.d(n,{Ks:function(){return y}});var t=l(440),o=l(8643),a=l(4367),i=l(4592),s=l(4704),c=l(6037),u=l(7240),r=l(7922),d=l(8415),m=l(6086);const p=(0,t.aZ)({name:"ElTag"}),v=(0,t.aZ)({...p,props:u.F,emits:u.g,setup(e,{emit:n}){const l=e,u=(0,d.Cd)(),r=(0,m.s3)("tag"),p=(0,t.Fl)((()=>{const{type:e,hit:n,effect:t,closable:o,round:a}=l;return[r.b(),r.is("closable",o),r.m(e),r.m(u.value),r.m(t),r.is("hit",n),r.is("round",a)]})),v=e=>{n("close",e)},f=e=>{n("click",e)};return(e,n)=>e.disableTransitions?((0,t.wg)(),(0,t.iD)("span",{key:0,class:(0,o.C_)((0,a.SU)(p)),style:(0,o.j5)({backgroundColor:e.color}),onClick:f},[(0,t._)("span",{class:(0,o.C_)((0,a.SU)(r).e("content"))},[(0,t.WI)(e.$slots,"default")],2),e.closable?((0,t.wg)(),(0,t.j4)((0,a.SU)(s.gn),{key:0,class:(0,o.C_)((0,a.SU)(r).e("close")),onClick:(0,i.iM)(v,["stop"])},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(c.Close))])),_:1},8,["class","onClick"])):(0,t.kq)("v-if",!0)],6)):((0,t.wg)(),(0,t.j4)(i.uT,{key:1,name:`${(0,a.SU)(r).namespace.value}-zoom-in-center`,appear:""},{default:(0,t.w5)((()=>[(0,t._)("span",{class:(0,o.C_)((0,a.SU)(p)),style:(0,o.j5)({backgroundColor:e.color}),onClick:f},[(0,t._)("span",{class:(0,o.C_)((0,a.SU)(r).e("content"))},[(0,t.WI)(e.$slots,"default")],2),e.closable?((0,t.wg)(),(0,t.j4)((0,a.SU)(s.gn),{key:0,class:(0,o.C_)((0,a.SU)(r).e("close")),onClick:(0,i.iM)(v,["stop"])},{default:(0,t.w5)((()=>[(0,t.Wm)((0,a.SU)(c.Close))])),_:1},8,["class","onClick"])):(0,t.kq)("v-if",!0)],6)])),_:3},8,["name"]))}});var f=(0,r.Z)(v,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tag/src/tag.vue"]]),w=l(5482);const y=(0,w.nz)(f)},7240:function(e,n,l){l.d(n,{F:function(){return a},g:function(){return i}});var t=l(1879),o=l(4324);const a=(0,t.o8)({closable:Boolean,type:{type:String,values:["success","info","warning","danger",""],default:""},hit:Boolean,disableTransitions:Boolean,color:{type:String,default:""},size:{type:String,values:o.k,default:""},effect:{type:String,values:["dark","light","plain"],default:"light"},round:Boolean}),i={close:e=>e instanceof MouseEvent,click:e=>e instanceof MouseEvent}}}]);